\usetikzlibrary{calc}
\newcommand{\transistor}[4]{
    \coordinate (P1) at (#1,#2);
    \coordinate (P2) at (#3,#4);

    \pgfmathsetmacro{\rx}{#3 - #1}
    \pgfmathsetmacro{\ry}{#4 - #2}
    \pgfmathsetmacro{\r}{atan2(\ry,\rx)}

    \draw[line width=1mm, color=gray, line cap=round]
        let
            \p1 = ($(P2)-(P1)$),
            \n1 = {atan2(\y1,\x1)},
            \n2 = {veclen(\x1,\y1)},
        in
            [rotate=\n1]
            ($(P1)!0!(P2)$) -- ++(\n2,0);

    \begin{scope}[shift={($(P1)!0.5!(P2)$)}, rotate=\r]
        % \fill[black!80] (-1.0,0.8) -- (-0.9,0.2) -- (0.9,0.2) -- (1.0,0.8)
        % .. controls (0.8,2.1) and (-0.8,2.1) .. (-1.0,0.8) -- cycle;
        \fill[black!80] (-1.0,-0.35) -- (-0.9,-0.95) -- (0.9,-0.95) -- (1.0,-0.35)
        .. controls (0.8,0.95) and (-0.8,0.95) .. (-1.0,-0.35) -- cycle;
    \end{scope}
}
